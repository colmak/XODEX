{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://xodex.dev/schema/foldgraph_v0_1.schema.json",
  "title": "FoldGraph v0.1",
  "type": "object",
  "required": ["foldgraph_version", "towers", "bonds", "graph_stats"],
  "properties": {
    "foldgraph_version": {"type": "number", "const": 0.1},
    "towers": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "tower_id", "residue_class", "pos_x", "pos_y", "thermal_state", "modifiers"],
        "properties": {
          "id": {"type": "integer"},
          "tower_id": {"type": "string"},
          "residue_class": {
            "type": "string",
            "enum": [
              "nonpolar",
              "polar_uncharged",
              "positively_charged",
              "negatively_charged",
              "special"
            ]
          },
          "pos_x": {"type": "integer"},
          "pos_y": {"type": "integer"},
          "thermal_state": {"type": "number"},
          "modifiers": {"type": "array", "items": {"type": "string"}}
        }
      }
    },
    "bonds": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["from_id", "to_id", "affinity_type", "strength", "contrib", "timestamp"],
        "properties": {
          "from_id": {"type": "integer"},
          "to_id": {"type": "integer"},
          "affinity_type": {"type": "string"},
          "strength": {"type": "number"},
          "contrib": {"type": "number"},
          "timestamp": {"type": "integer"}
        }
      }
    },
    "graph_stats": {
      "type": "object",
      "required": ["total_bonds", "avg_stability", "misfold_risk"],
      "properties": {
        "total_bonds": {"type": "integer"},
        "avg_stability": {"type": "number"},
        "misfold_risk": {"type": "number"}
      }
    },
    "tick_counter": {"type": "integer"}
  }
}
